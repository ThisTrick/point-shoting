# TypeScript Error Fixing Scripts

–ù–∞–±—ñ—Ä —Å–∫—Ä–∏–ø—Ç—ñ–≤ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è TypeScript –ø–æ–º–∏–ª–æ–∫ –≤–µ–ª–∏–∫–∏–º–∏ –ø–∞—á–∫–∞–º–∏.

## üìä –û–≥–ª—è–¥

–¶—ñ —Å–∫—Ä–∏–ø—Ç–∏ –∞–Ω–∞–ª—ñ–∑—É—é—Ç—å —ñ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–ø—Ä–∞–≤–ª—è—é—Ç—å –ø–æ—à–∏—Ä–µ–Ω—ñ TypeScript –ø–æ–º–∏–ª–∫–∏ –≤ –ø—Ä–æ–µ–∫—Ç—ñ:

- **TS6133, TS6196**: –ù–µ–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ –∑–º—ñ–Ω–Ω—ñ —Ç–∞ —ñ–º–ø–æ—Ä—Ç–∏ (44 errors)
- **TS2300**: –î—É–±–ª—ñ–∫–∞—Ç–∏ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä—ñ–≤ (6 errors)
- **TS18047, TS18048, TS2532**: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∏ null/undefined (16 errors)
- **TS2305, TS2307**: –ü—Ä–æ–±–ª–µ–º–∏ –∑ —ñ–º–ø–æ—Ä—Ç–∞–º–∏ –≤ —Ç–µ—Å—Ç–∞—Ö (9 errors)

**–ó–∞–≥–∞–ª—å–Ω–∞ –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å**: ~30% –ø–æ–º–∏–ª–æ–∫ –º–æ–∂–Ω–∞ –≤–∏–ø—Ä–∞–≤–∏—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ (75 –∑ 258)

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### –ú–µ—Ç–æ–¥ 1: –í—Å–µ —Ä–∞–∑–æ–º (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

```bash
cd ui
./scripts/batch-fix-errors.sh
```

–¶–µ–π —Å–∫—Ä–∏–ø—Ç:
1. –ê–Ω–∞–ª—ñ–∑—É—î –≤—Å—ñ –ø–æ–º–∏–ª–∫–∏
2. –ü–æ–∫–∞–∑—É—î –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—é
3. –ü–∏—Ç–∞—î –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è
4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–ø—Ä–∞–≤–ª—è—î ~75 –ø–æ–º–∏–ª–æ–∫
5. –ü–æ–∫–∞–∑—É—î –ø—Ä–æ–≥—Ä–µ—Å –ø—ñ—Å–ª—è –∫–æ–∂–Ω–æ–≥–æ –∫—Ä–æ–∫—É

### –ú–µ—Ç–æ–¥ 2: –ü–æ–∫—Ä–æ–∫–æ–≤–µ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è

```bash
cd ui

# –ö—Ä–æ–∫ 1: –ê–Ω–∞–ª—ñ–∑ –ø–æ–º–∏–ª–æ–∫
node scripts/analyze-ts-errors.js

# –ö—Ä–æ–∫ 2: –í–∏–ø—Ä–∞–≤–∏—Ç–∏ –Ω–µ–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ –∑–º—ñ–Ω–Ω—ñ
node scripts/fix-unused-vars.js

# –ö—Ä–æ–∫ 3: –í–∏–ø—Ä–∞–≤–∏—Ç–∏ null checks
node scripts/fix-null-checks.js

# –ö—Ä–æ–∫ 4: –í–∏–ø—Ä–∞–≤–∏—Ç–∏ —ñ–º–ø–æ—Ä—Ç–∏ –≤ —Ç–µ—Å—Ç–∞—Ö
node scripts/fix-test-imports.js

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
npm run typecheck
```

## üìã –î–æ–∫–ª–∞–¥–Ω–∏–π –æ–ø–∏—Å —Å–∫—Ä–∏–ø—Ç—ñ–≤

### 1. analyze-ts-errors.js

**–©–æ —Ä–æ–±–∏—Ç—å:**
- –ó–∞–ø—É—Å–∫–∞—î `npm run typecheck`
- –ü–∞—Ä—Å–∏—Ç—å —É—Å—ñ –ø–æ–º–∏–ª–∫–∏
- –ö–ª–∞—Å–∏—Ñ—ñ–∫—É—î –∑–∞ —Ç–∏–ø–æ–º, —Ñ–∞–π–ª–æ–º, –∫–∞—Ç–µ–≥–æ—Ä—ñ—î—é
- –ü–æ–∫–∞–∑—É—î —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- –ó–±–µ—Ä—ñ–≥–∞—î –¥–µ—Ç–∞–ª—å–Ω–∏–π –∑–≤—ñ—Ç —É `.type-errors-report.json`

**–í–∏–≤—ñ–¥:**
```
ERROR CLASSIFICATION BY TYPE
TS2339: Property does not exist on type
  Count: 59
  Auto-fixable: ‚ùå NO

ERROR CLASSIFICATION BY FILE
./tests/e2e/user-workflows.spec.ts
  Errors: 32
  Types: TS2353, TS2322

ERROR CLASSIFICATION BY CATEGORY
TESTS: 180 errors
RENDERER: 42 errors
MAIN: 36 errors
```

### 2. fix-unused-vars.js

**–í–∏–ø—Ä–∞–≤–ª—è—î:** TS6133, TS6196 (44 –ø–æ–º–∏–ª–∫–∏)

**–°—Ç—Ä–∞—Ç–µ–≥—ñ—ó:**
- –í–∏–¥–∞–ª—è—î –Ω–µ–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ —ñ–º–ø–æ—Ä—Ç–∏
- –î–æ–¥–∞—î `_` –ø—Ä–µ—Ñ—ñ–∫—Å –¥–æ –Ω–µ–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ —Ñ—É–Ω–∫—Ü—ñ–π
- –û—á–∏—â–∞—î –ø–æ—Ä–æ–∂–Ω—ñ —Ä—è–¥–∫–∏ —ñ–º–ø–æ—Ä—Ç—ñ–≤
- –ó–±–µ—Ä—ñ–≥–∞—î —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –∫–æ–¥—É

**–ü—Ä–∏–∫–ª–∞–¥:**
```typescript
// –î–æ:
import { foo, bar, baz } from 'module';
function test(unusedParam, usedParam) { ... }

// –ü—ñ—Å–ª—è:
import { bar, baz } from 'module';
function test(_unusedParam, usedParam) { ... }
```

### 3. fix-null-checks.js

**–í–∏–ø—Ä–∞–≤–ª—è—î:** TS18047, TS18048, TS2532 (16 –ø–æ–º–∏–ª–æ–∫)

**–°—Ç—Ä–∞—Ç–µ–≥—ñ—ó:**
- –î–æ–¥–∞—î optional chaining (`?.`)
- –î–æ–¥–∞—î non-null assertion (`!`) –¥–µ –±–µ–∑–ø–µ—á–Ω–æ
- –î–æ–¥–∞—î –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –¥–ª—è array access

**–ü—Ä–∏–∫–ª–∞–¥:**
```typescript
// –î–æ:
const value = obj.property.nested;
const item = array[index];

// –ü—ñ—Å–ª—è:
const value = obj?.property?.nested;
const item = array?.[index];
```

**‚ö†Ô∏è –£–≤–∞–≥–∞:** –î–µ—è–∫—ñ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø–æ—Ç—Ä–µ–±—É—é—Ç—å –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏!

### 4. fix-test-imports.js

**–í–∏–ø—Ä–∞–≤–ª—è—î:** TS2305, TS2307 –≤ —Ç–µ—Å—Ç–∞—Ö (9 –ø–æ–º–∏–ª–æ–∫)

**–°—Ç—Ä–∞—Ç–µ–≥—ñ—ó:**
- –û–Ω–æ–≤–ª—é—î —à–ª—è—Ö–∏ —ñ–º–ø–æ—Ä—Ç—ñ–≤ –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ
- –í–∏–¥–∞–ª—è—î —ñ–º–ø–æ—Ä—Ç–∏ –Ω–µ—ñ—Å–Ω—É—é—á–∏—Ö —Ç–∏–ø—ñ–≤
- –î–æ–¥–∞—î –≤—ñ–¥—Å—É—Ç–Ω—ñ —ñ–º–ø–æ—Ä—Ç–∏ –∑ `@shared/types`

**Mapping:**
```
ElectronAPI: '../contexts/ElectronContext' ‚Üí '@shared/types'
EngineStatus: '../contexts/EngineContext' ‚Üí '@shared/engine'
UISettings: '../contexts/SettingsContext' ‚Üí '@shared/core'
SettingsPreset: ‚Üí –≤–∏–¥–∞–ª–∏—Ç–∏ (type –Ω–µ —ñ—Å–Ω—É—î)
```

## üìà –û—á—ñ–∫—É–≤–∞–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏

### –î–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è
```
Found 258 TypeScript errors

By category:
- Tests: 180 errors
- Renderer: 42 errors  
- Main: 36 errors

By type:
- TS2339 (Property does not exist): 59
- TS6133 (Unused variable): 39
- TS2322 (Type mismatch): 33
- TS2353 (Unknown property): 32
```

### –ü—ñ—Å–ª—è batch-fix-errors.sh
```
Initial errors:   258
Fixed errors:     75
Remaining errors: 183
Success rate:     29%

Remaining errors require manual fixes:
- TS2339: Property does not exist (59)
- TS2322: Type assignment mismatch (33)
- TS2353: Unknown properties (32)
```

## üîß –©–æ –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è —Ä–æ–±–∏—Ç–∏ –≤—Ä—É—á–Ω—É

–ü—ñ—Å–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏—Ö –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—å –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è ~183 –ø–æ–º–∏–ª–∫–∏, —è–∫—ñ –ø–æ—Ç—Ä–µ–±—É—é—Ç—å —Ä—É—á–Ω–æ–≥–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:

### 1. Type mismatches (TS2339, TS2322, TS2353) - 124 errors

**–ü—Ä–æ–±–ª–µ–º–∞:** UISettings –º–∞—î —ñ–Ω—à—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É –Ω—ñ–∂ –æ—á—ñ–∫—É—é—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

**–†—ñ—à–µ–Ω–Ω—è:** 
- –£–∑–≥–æ–¥–∏—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É UISettings –≤ `@shared/core.ts`
- –î–æ–¥–∞—Ç–∏ –≤—ñ–¥—Å—É—Ç–Ω—ñ –ø–æ–ª—è: `animation`, `performance`, `interface`, `watermark`
- –ê–ë–û –æ–Ω–æ–≤–∏—Ç–∏ –≤—Å—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –ø—ñ–¥ –Ω–æ–≤—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É

### 2. Test mock mismatches - 45 errors

**–ü—Ä–æ–±–ª–µ–º–∞:** ElectronAPI –º–æ–∫—ñ –≤ —Ç–µ—Å—Ç–∞—Ö –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—é—Ç—å —Ä–µ–∞–ª—å–Ω–æ–º—É —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É

**–†—ñ—à–µ–Ω–Ω—è:**
- –°—Ç–≤–æ—Ä–∏—Ç–∏ shared mock factory: `tests/helpers/createElectronAPIMock.ts`
- –û–Ω–æ–≤–∏—Ç–∏ –≤—Å—ñ —Ç–µ—Å—Ç–∏ –Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ü—å–æ–≥–æ factory
- –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ –∑ —Ä–µ–∞–ª—å–Ω–∏–º ElectronAPI interface

### 3. Missing exports (TS2305) - 14 errors

**–ü—Ä–æ–±–ª–µ–º–∞:** –î–µ—è–∫—ñ —Ç–∏–ø–∏ —â–µ –Ω–µ –µ–∫—Å–ø–æ—Ä—Ç—É—é—Ç—å—Å—è –∑ –º–æ–¥—É–ª—ñ–≤

**–†—ñ—à–µ–Ω–Ω—è:**
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ `@shared/index.ts` —Ç–∞ –¥–æ–¥–∞—Ç–∏ –≤—ñ–¥—Å—É—Ç–Ω—ñ –µ–∫—Å–ø–æ—Ä—Ç–∏
- –°—Ç–≤–æ—Ä–∏—Ç–∏ –≤—ñ–¥—Å—É—Ç–Ω—ñ —Ç–∏–ø–∏ —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ

## üìù Best Practices

1. **–ó–∞–≤–∂–¥–∏ —Ä–æ–±—ñ—Ç—å backup –ø–µ—Ä–µ–¥ batch-fix:**
   ```bash
   git add -A
   git commit -m "WIP: before batch fixes"
   ```

2. **–ü–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ –∑–º—ñ–Ω–∏ –ø—ñ—Å–ª—è –∫–æ–∂–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞:**
   ```bash
   git diff
   npm run typecheck
   ```

3. **–¢–µ—Å—Ç—É–π—Ç–µ –ø—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—å:**
   ```bash
   npm test
   npm run lint
   ```

4. **–î–ª—è —Å–∫–ª–∞–¥–Ω–∏—Ö –≤–∏–ø–∞–¥–∫—ñ–≤ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –ø–æ–µ—Ç–∞–ø–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥:**
   - –°–ø–æ—á–∞—Ç–∫—É –≤–∏–ø—Ä–∞–≤—Ç–µ –ø—Ä–æ—Å—Ç—ñ –ø–æ–º–∏–ª–∫–∏ (unused vars)
   - –ü–æ—Ç—ñ–º –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ –Ω—ñ—á–æ–≥–æ –Ω–µ –∑–ª–∞–º–∞–ª–æ—Å—å
   - –¢–æ–¥—ñ –ø–µ—Ä–µ—Ö–æ–¥—å—Ç–µ –¥–æ —Å–∫–ª–∞–¥–Ω—ñ—à–∏—Ö (null checks)

## üêõ Troubleshooting

### "Error report not found"
```bash
# –°–ø–æ—á–∞—Ç–∫—É –∑–∞–ø—É—Å—Ç—ñ—Ç—å analyze
node scripts/analyze-ts-errors.js
```

### "File not found"
–ú–æ–∂–ª–∏–≤–æ —Ñ–∞–π–ª –±—É–ª–æ –ø–µ—Ä–µ–π–º–µ–Ω–æ–≤–∞–Ω–æ/–≤–∏–¥–∞–ª–µ–Ω–æ. –ó–≤—ñ—Ç –∑–∞—Å—Ç–∞—Ä—ñ–≤:
```bash
# –û–Ω–æ–≤—ñ—Ç—å –∑–≤—ñ—Ç
node scripts/analyze-ts-errors.js
```

### –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–ø—É—Å—Ç–∏–≤ –ø–æ–º–∏–ª–∫–∏
–î–µ—è–∫—ñ –ø–æ–º–∏–ª–∫–∏ –∑–∞–Ω–∞–¥—Ç–æ —Å–∫–ª–∞–¥–Ω—ñ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è. –¶–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ.

### –ü—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—å –∑'—è–≤–∏–ª–∏—Å—å –Ω–æ–≤—ñ –ø–æ–º–∏–ª–∫–∏
–Ü–Ω–æ–¥—ñ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –æ–¥–Ω—ñ—î—ó –ø–æ–º–∏–ª–∫–∏ –≤—ñ–¥–∫—Ä–∏–≤–∞—î —ñ–Ω—à—É. –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–∫—Ä–∏–ø—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ:
```bash
./scripts/batch-fix-errors.sh
```

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤

```
ui/scripts/
‚îú‚îÄ‚îÄ analyze-ts-errors.js      # –ê–Ω–∞–ª—ñ–∑–∞—Ç–æ—Ä –ø–æ–º–∏–ª–æ–∫
‚îú‚îÄ‚îÄ fix-unused-vars.js         # –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è unused
‚îú‚îÄ‚îÄ fix-null-checks.js         # –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è null checks
‚îú‚îÄ‚îÄ fix-test-imports.js        # –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è —ñ–º–ø–æ—Ä—Ç—ñ–≤
‚îú‚îÄ‚îÄ batch-fix-errors.sh        # Master —Å–∫—Ä–∏–ø—Ç
‚îî‚îÄ‚îÄ README-FIXING-SCRIPTS.md   # –¶—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

ui/
‚îî‚îÄ‚îÄ .type-errors-report.json   # –î–µ—Ç–∞–ª—å–Ω–∏–π JSON –∑–≤—ñ—Ç (–≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è)
```

## üéØ Roadmap

–ú–∞–π–±—É—Ç–Ω—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è:

- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è TS2322 (type mismatches)
- [ ] –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è test mocks —ñ–∑ —Ä–µ–∞–ª—å–Ω–∏—Ö —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ–≤
- [ ] –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ pre-commit hook
- [ ] –î–æ–¥–∞—Ç–∏ dry-run —Ä–µ–∂–∏–º –¥–ª—è preview –∑–º—ñ–Ω
- [ ] Rollback —Ñ—É–Ω–∫—Ü—ñ—è —è–∫—â–æ —â–æ—Å—å –ø—ñ—à–ª–æ –Ω–µ —Ç–∞–∫

## üìö –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ä–µ—Å—É—Ä—Å–∏

- [TypeScript Error Reference](https://typescript.tv/errors/)
- [Project Type System Documentation](../specs/002-ui/TYPE_REFACTORING_PROGRESS.md)
- [Implementation Status](../specs/002-ui/IMPLEMENTATION_STATUS.md)
